제 7 장 텍스트 편집

	7.1 편집기

00. 텍스트 편집기의 종류

gedit	: GUI 기반 텍스트 편집기, Windows 메모장보다 조금 강력, VSCode보다는 단순, 문법 강조(C, Python, HTML, Shell)

vi, vim	: 텍스트편집기(고급),	TUI(터미널UI),	명령모드+입력모드,	고급, 빠름, 단축키 다양,	vi file.txt

nano	: 단순 텍스트 편집기,	TUI(터미널UI),	바로 입력 가능,		초보자 친화적,			nano file.txt
	: 저장 명령(Ctrl+O)

cat	: 파일 내용 표시/입력,	CLI(라인단위),	한 번에 입력 후 저장,	편집기능 없음, concatenate (연결)
	: cat > file.txt,  입력 중 종료 --> Ctrl+D

tee	: 출력->파일저장(동시),	CLI(파이프라인형), 주로 파이프와 함께 사용됨. 편집기능 없음.
	: -a 옵션--> 기존 파일에 추가(append)	echo "Linux" | tee result.txt		ls | tee files.txt		

touch,	: 빈 파일 생성+,	CLI,	수정시간(timestamp) 갱신, 	입력 불가, 	단순 파일 생성용, 편집기능 없음	
	: touch file.txt   or touch *.log --> 기존 파일은 수정시간(timestamp)를 갱신하고, 파일이 없으면 신규 빈 파일 생성 

emacs	: (Editor MACroS)	고급(IDE 수준),	편집기+프로그래 환경,	자체 스크립트 언어(Elisp = Emacs Lisp)


01.
vim이 vi와 다른 점 중 주목할 만한 것은 HTML 페이지, C 프로그램, 셸 스크립트 및 설정 파일 등과 같이 잘 알려진 텍스트 파일의 구문 구조를 표시하기 위해 컬러를 사용하는 점이며, 화면을 분할하여 작업할 수 있고, 블록을 선택할 때 비주얼 모드를 지원한다는 점이다

02. 기본 형식

	vi [-c command ] [file]

03.
파일을 지정하지 않거나 존재하지 않는 파일을 지정하면 빈 파일을 열고 빈 페이지가 화면에 표시된다.

04.
vi -c "set nu" /home/kdhomg/file	과 같이 하면 vi를 시작할 때 다음에 설명할 명령 모드에서 실행되는 명령(여기에서는 행 번호를 표시하는 것과 같은 것)을 먼저 수행하는 것이다. 

05.
vi 편집기는 기본적으로 명령 모드로 시작된다.


	7.2 vi로 편집하기


	1. Text 입력

  1) a: 소문자 a는 현재 커서 위치의 오른쪽부터 텍스트 추가(add)할 수 있다.
  2) i: 소문자 i는 현재 커서 위치부터 텍스트를 삽입(insert)할 수 있다.

  3) I: 대문자 I는 현재 라인의 처음에 텍스트를 삽입(Insert)할 수 있다.
  4) A: 대문자 A는 현재 라인의 끝에 텍스트를추가(Add)할 수 있다.

  5) o: 소무자 o는 현재 라인의 아래에 새 라인이 열리고(open) 텍스트를 추가할 수 있다.
  6) O: 대문자 O는 현재 라인 위에  라인이 열리고(Open) 텍스트를 추가할 수 있다.


	2. 커서 이동 명령 (명령모드에 있을 때)

  1) 방향키: 커서를 왼쪽, 위, 아래, 오른쪽으로 한 번에 한 글자씩 이동한다.
  2) h j k l: h를 누르면 왼쪽, j는 아래, k는 위, l은 오른쪽으로 이동한다.
  
  3) space bar / Backspace: 
    - 편집모드: 스페이스바는 오른쪽으로 이동하며 공백문자를 생성고, 
                백스페이스는 왼쪽으로 이동하며 공백문자를 삭제하거나, 글자를 지한다.
    - 명령모드: 스페이스바는 오른쪽으로 백스페이스는 왼쪽으로 이동한다.

  4) w, W: 다음 단어의 첫 자로 이동한다. 단어의 구분은 빈칸, 탭, 구두점으로 한다. 
        구두점은 마침표, 쉼표, 하이픈, 슬래시, 콜론, 물음표, 느낌표 등을 말한다.
  5) b, B: 앞 단어의 첫 자로 이동한다. 단어의 구분은 빈칸, 탭이다.

  6) 0, g0: 현재 라인의 첫 칸으로 이동한다.
  7) ^, g^: 현재 라인에서 빈칸이 아닌 첫 칸으로 이동한다. Home 키와 기능이 같다.
  8) $, g$: 현재 라인의 마지막 칸의 이동한다. End 키와 기능이 같다.

  9) H, M, L: H는 화면에서 첫 라인, M은 가운데 라인, L은 마지막 라인의 첫 칸으로 이동한다.

 10) PgUp, Ctrl+b: 한 페이지 위로 이동한다.
 11) PgDn, Ctrl+f: 한 페이지 아래로 이동한다.
 12) Ctrl+d, Ctrl+u: 반 페이지 아래로 또는 위로 이동한다.

 13) 1G, gg: 첫 라인이르 이동한다.
 14) 20G: 20번째 라인으로 이동한다.
 15) G: 마지막 라인으로 이동한다.

 16) 5j: 아래로 다섯 라인을 이동시킨다.  


	3. 텍스트의 삭제와 변경 (명령모드)

  1) x: 커서 위치의 한 문자를 삭제한다.
  2) 3x: 커서 위치부터 세 글자를 삭제한다.

  3) dw: 커서 위치부터 다음 단어 전까지 삭제한다. delete word
  4) 3dw: 커서 위치부터 세 단어를 삭제한다.

  5) db: 커서의 왼쪽부터 이전 단어를 삭제한다. delete back
 
  6) d$, D: 커서 위치부터 현재 라인의 끝까지 삭제한다. 
  7) d0: 커서의 왼쪽부터 현재 라인의 처음까지 삭제한다.
  8) d^: d0와 같으나 라인 앞의 빈칸은 삭제하지 않는다. 

  9) dd: 현재 라인을 삭제한다.
 10) 5dd: 현재 라인부터 5 라인을 삭제한다.

 11) dG: 커서의 왼쪽부터 앞 단어 전까지 삭제한다.

 12) dH: 현재 라인부터 화면의 앞까지 삭제한다.
 13) dL: 현재 라인부터 화면 끝까지 삭제한다. 

 14) d20G: 현재 라인부터 라인번호 20까지 삭제한다.


	4. 텍스트 변경(또는 치환) (명령모드)

  1) r: 커서 위치의 한 문자가 대치된다. 명령 모드가 계속 유지된다.
  2) R: 커서 위치부터 계속 대치할 수 있다. 수정모드로 전환된 셈이다.

  3) s, cl: 커서 위치의 문자가 삭제되고 입력 모드로 전환된다.
  4) S, cc: 현재 라인에 존재하는 문자가 삭제되고 입력 모드로 전환된다.

  5) c$, C: 커서 위치부터 라인의 끝까지 삭제되고 입력 모드로 전환된다.
  6) c0: 커서의 왼쪽부터 라인의 앞까지 삭제되고 입력 모드로 전환된다.

  7) cw: 커서 위치부터 단어의 끝까지 삭제되고 입력 모드로 전환된다.
  8) cb: 커서 위치의 왼쪽부터 단어의 앞까지 삭제되고 입력 모드로 전환된다.

  9) c): 커서 위치부터 문장의 끝까지 삭제되고 입력 모드로 전환된다.
 10) c}: 커서 위치부터 문단의 끝까지 삭제되고 입력 모드로 전환된다.

 11) cH: 현재 라인부터 화면의 앞까지 삭제되고 입력 모드로 전환된다.
 12) cL: 현재 라인부터 화면의 끝까지 삭제되고 입력 모드 전환된다.
 
 13) cG: 현재 라인부터 파일의 끝까지 삭제되고 입력 모드로 전환된다.

    
	5. 텍스트 복사와 붙여넣기 및 명령의 반복

  1) yy: 현재 라인을 복사한다.
  2) 5yy: 현지 라인부터 5개 라인을 복사한다.

  3) yw: 커서 위치부터 다음 단어의 앞까지 복사한다.
  4) y$: 커서 위치부터 라인의 끝까지 복사한다.

  5) y0: 커서의 왼쪽부터 현재 라인의 맨 앞까지 복사한다.
  6) y^: 위와 같으나 라인 앞의 빈 칸은 복사하지 않는다.

  7) yG: 현재 라인부터 파일의 끝까지 복사한다.
  8) y20G: 현재 라인부터 라인번호 20까지 복사한다.

  9) y): 커서 위치부터  한 문장을 복사한다.
 10) y}: 커서 위치부터 한 문단을 복사한다.


	6. 텍스트 붙여넣기 명령키 (명령모드)

  1) P: 복사된 텍스트가 문자나 단어이면 커서의 왼쪽에 붙여넣기 한다. 
        복사된 텍스트가 라인이면 현재 라인의 위에 붙여넣기 한다.

  2) p: 복사된 텍스트가 문자나 단어이면 커서의 오른쪽에 붙여넣기 한다.
        복사된 텍스트가 라인이면 현재 라인의 아래에 붙여넣기 한다.

  3) '.': 변경, 삭제 또는 붙여넣기를 수행한 후 명령키로 점(.)을 입력하면 앞서 수행한 작업을 반복 수행할 수 있다.


	7. 블록 지정하기 (명령 모드/비주얼 모드)

  1) v, V: 비주얼 모드에서 한 번에 한 문자씩(v), 한 라인씩(V) 선택한다.
  2) 블럭을 지정하고 싶은 곳에 커서를 이동시킨 후 화살표를 이용하여 블록을 지정한다. 블록을 지정한 후 삭제하려면 x를, 복사하려면 y를 타이핑한다. 복사된 블록을 붙여넣기 하려면 p를 입력한다. 


	8. 파일의 저장과 vi 종료 (명령 모드)

  1) :w 	: 문서의 내용을 현재 파일에 저장한다.
  2) :wq 	: 문서의 내용을 현재 파일 저장한 후 vi를 종료한다.
  3) :w filename	: 문서의 내용을 파일에 저장한다.
  4) :w! filename	: 문서의 내용을 정된 파일에 저장하되 덮어쓴다. !는 강제 실행을 의미한다. 
  5) :n, m, w filename	: 문서에서 라인 n에서 m까지의 내용을 새로운 파일 이름으로 저장한다.
  6) :q		: 문서의 내용이 변경된 적이 없다면 종료한다.
  7) :q!	: 문서의 니용을 저장하지 않고 강제 종료한다.
  8) :w		: 종료하되 파일에 변경이 있었다면 저장하고 종료한다.


	9. 명령의 취소와 기타 명령 키 (명령 모드)

  1) u	: 이전 변경 작업을 취소한다. undo
  2) Ctrl+R	: 앞서 취소했던 작업을 다시 한다. 즉 취소를 취소한다.
  3) :e!	: 마지막으로 저장한 후의 작업을 취소하고 다시 작업한다.
  4) :n		: n번째 라인으로 이동한다.
  5) J, j	: 현재 라인과 아래 라인을 합친다.
  6) :! command : vi를 사용하다 셸 명령 command를 수행한다.
  7) :sh	: vi를 잠시 빠져나가 셸  명령을 수행한다. 셸 명령으로 exit을 실행하면 다시 vi로 돌아올 수 있다.
  8) :se nu	: 화면 왼쪽에 라인 번호를 표시하게 한다.
  9) Ctrl+g	: 화면 하단에 파일의 이름, 전체 라인 수, 현재 라인의 상대적 위치를 퍼센티지로 표시한다.
 10) r filename	: 지정된 파일의 내용을 읽어 현재 커서의 아래에 추가한다.


	10. 검색과 대치 (명령 모드) - 01

00.
파일 전체를 대상으로 단어를 검색하여 커서를 이동시키려면 명령 모드에서 슬래시("/")를 타이핑하여 라인 모드로 전환한다. 패턴을 입력하고 Enter를 누르면 지정된 문자열을 찾아 커서가 이동될 것이다. 같은 검색을 반복하려면 명령 모드에서 명령키 n을 누른다.

  1) /pattern	: 순 방향으로 pattern을 검색하여 커서를 이동한다.
  2) /pattern/+num	: pattern을 검색하고 그 뒤(+) num번째 라인으로 이동한다.

  3) ?pattern	: 역 방향으로 pattern을 검색하여 커서를 이동한다. 
  4) ?pattern?+num	: pattern을 검색하고 그 앞(+) num번째 라인으로 이동한다.

  5) n	: 이전 검색을 같은 방향으로 반복한다.
  6) N	: 이전 검색을 반대 방향으로 반복한다.

  7) /Enter	: 이전 검색을 순방향으로 반복한다.
  8) ?Enter	: 이전 검색을 역방향으로 반복한다.

01. 
문자열을 검색할 때 pattern에 정규식(regular expression, re)을 사용할 수 있다.

  9) /hello	: 순방향으로 hello를 검색하 커서를 이동한다.
 10) ?goodbye	: 역방향으로 goodbye를 검색하여 커서를 이동한다.
 11) /The.*does	: 단어 The를 포함하고 그 이후에 단어 does를 포함하는 라인을 검색한다.
                  점(.)은 임의의 한 문자와 매칭되며, 애스터리스크(*)은 앞의 문자(여기서는 임의의 문자)가 0개 이상 나타날 수 있음을 의미한다.
 12) ?[pP]rint	: 단어 print나  Print를 역방향으로 검색한다. []는 안에 포함하는 문자 중 하나와 매치된다.


	10. 검색(search)과 대치(replace) (명령 모드) - 02

	[g][address]s/pattern/replacement[/option]

00. [g][address]는 검색 범위를 뜻한다. 예를 들어 1,10은 1라인부터 10라인까지이다. 1,$ 또는 1,%는 검색범위가 전체임을 뜻한다. /pine은 pine을 포함하는 커서 다음에 나오는 한 라인을, g/pine/은 pine을 포함하는 모든 라인을 대상으로 검색한다. 범위가 생략되면 커서가 위치한 라인을 대상으로 한다.
01.
s는 pattern을 찾아 replacement로 대치하라는 의미이다. s는 연산의 종류이며, 대치(substitution) 또는 search and replacement) 연산을 의미한다.
02.
[/option]이 생략되 검색된 라인에서 첫 번째 패턴만 대치하며, 옵션에 g가 사용되면 검색된 라인에서 모든 패턴을 대치한다. gc가 사용되면 수정 여부를 확인한다.

  1) :s/pattern/replacement	: 커서가 위치한 첫 번쩨 등장하는 pattern을 replacement로 대치한다.
  2) :%s/pattern/replacement 	: 전체(%) 범위의 라인에서 위와 같은 것을 수행한다. %는 수행 범위가 전체임을 뜻한다. 
				  % 대신에 1,$를 넣어도 된다. $는 끝을 의미한다.

  3) :%s/pattern/replacement/g 	: 위와 같으나, 등장하는 모든 pattern(/g)을 대치한다. 
				  여기서 g는 검색된 라인에서 모든 패턴을 의미한다.

  4) :1,10s/pattern/replacement/g	: 위와 같으나, 1~10 라인에서 수행한다.
  5) :1,10s/pattern/replacement/gc	: 위와 같으나, 수정 여부를 확인(c)한다.


### 검색과 대치 명령의 사용 예

ex1) :g/Name:/s/tom/Tom --> 단어 Name을 포함하는 모든 라인에서(g/Name:/) 대치(s)를 수행한다. 해당 라인에서 첫 번째로 등장하는 tom을 찾아 Tom으로 대치한다. 

ex2) :1,10s/yes/no/g --> 1~10번 라인에서 대치한다(1,10s). yes를 포함하는 라인을 검색하고, 검색된 라인에서 등장하는 모든(g) yes를 no로 대치한다.

ex3) :%s/unix/Unix/gc --> 전체(%)에서 대치(s)한다. unix를 포함하는 라인을 검색하고, 검색된 라인에 등장하는 모든(g) 패턴을 확인(c)을 통해 Unix로 대치한다.

ex4) :%s[Hh]ello/Hi/gc --> 전체(%)에서 대치(s)한다. 단어 Hello 또는 hello를 포함하는 라인을 검색하고, 검색된 라인에 등장하는 모든(g) 패턴을 확인(c)을 통해 Hi로 대치한다.

ex5) :g/Local/s/Remote/ --> Local을 포함하는 모든 라인(g/Local)에서 대치(s)를 수행한다. 검색된 라인에서 첫 번째 등장하는 Local을 Remote로 대치한다. 패턴이 생략되면 직전 패턴을 반복한다.

